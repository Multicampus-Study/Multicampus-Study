# 중앙 처리 장치(CPU)의 작동 원리

## CPU

---

CPU는 컴퓨터에서 가장 핵심적인 역할을 수행하는 부분으로써 프로그램을 실행하기 위해 메인 메모리에서 명령어를 인출하여 해독하고 실행한다.

## CPU의 구조

---

### 제어 장치(CU)

각 장치들의 동작을 결정하는 신호를 보냄

주 기억 장치에서 프로그램 명령어를 꺼내 해독하고, 그 결과에 따라 명령어 실행에 필요한 제어 신호를 기억 장치, 연산 장치, 입출력 장치로 보냄

### 연산 장치(ALU)

산술 및 논리 연상 수행

![ALU.png](%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%8B%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5(CPU)%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%85%E1%85%B5%2074cb01f3f887459b9f325b956549f829/ALU.png)

![CU.png](%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%8B%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5(CPU)%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%85%E1%85%B5%2074cb01f3f887459b9f325b956549f829/CU.png)

1. memory(주 기억 장치)에서 명령어를 꺼내 해석
2. 해석한 것을 토대로 제어 신호 전송

### 레지스터(Register)

      CPU 내부에 있는 메모리

명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장

고속 기억 장치

용도에 따라 범용 레지스터와 특수 목적 레지스터로 구분됨

- 범용 레지스터 : 연산에 필요한 데이터나 연산 결과를 임시로 저장
- 특수 목적 레지스터 : 특별한 용도로 사용하는 레지스터

## 핵심 특수 목적 레지스터

---

- **메모리 주소 레지스터(MAR)** : 읽기와 쓰기 연산을 수행할 주 기억 장치의 주소를 저장
- **프로그램 카운터(PC)** : 다음에 수행할 명령어의 주소를 저장
- **명령어 레지스터(IR)** : 현재 실행 중인 명령어를 저장
- **메모리 버퍼 레지스터(MBR)** : 주 기억 장치에서 읽어온 데이터나 주 기억 장치에 저장할 데이터를 임시로 저장
- **누산기(AC)** : 연산 결과를 임시로 저장

## **CPU 동작 과정**

---

1. 주 기억 장치는 입력 장치에서 읽어온 데이터, 보조 기억 장치에 저장된 프로그램 읽어옴
2. CPU는 프로그램 실행을 위해 주 기억 장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고 결과를 다시 주 기억 장치에 저장
3. 주 기억 장치는 처리 결과를 보조 기억 장치에 저장하거나 출력 장치로 보냄
4. 제어 장치는 위 과정에서 명령어가 순서대로 실행되도록 각 장치를 제어

## 명령어 세트

---

CPU가 실행할 명령어의 집합

![명령어세트.PNG](%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%8B%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5(CPU)%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%85%E1%85%B5%2074cb01f3f887459b9f325b956549f829/%EB%AA%85%EB%A0%B9%EC%96%B4%EC%84%B8%ED%8A%B8.png)

### 연산 코드

실행하는 연산의 종류에 따라 네 가지 기능으로 나뉜다.

- 연산 기능 : 산술 논리 연산 수행
- 제어 기능 : 명령어의 실행 순서 제어
- 데이터 전달 기능
- 입출력 기능

### 피 연산자

- 주소 : 기억 장치 혹은 레지스터의 주소가 저장됨
- 숫자/문자
- 논리 데이터

## 명령어 사이클

---

CPU가 주 기억 장치에서 하나의 명령어를 읽어와 수행하는 일련의 과정

명령어 사이클에는 인출 / 실행 / 간접 / 인터럽트 가 있지만 간접과 인터럽트는 필수적이지 않다.

- 인출 사이클

![인출.PNG](%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%8B%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5(CPU)%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%85%E1%85%B5%2074cb01f3f887459b9f325b956549f829/%EC%9D%B8%EC%B6%9C.png)

1. PC에 저장된 주소를 MAR으로 전달
2. 저장된 내용을 토대로 주 기억 장치의 해당 주소에서 명령어 인출
3. 인출한 명령어를 MBR에 저장
4. 다음 명령어를 인출하기 위해 PC값 증가 
5. MBR에 저장된 내용을 IR에 전달

```
T0 : MAR <- PC
T1 : MBR <- M[MAR]
T2 : IR <- MBR
```

- 실행 사이클
    
    

![실행.PNG](%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%8B%E1%85%A1%E1%86%BC%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5(CPU)%E1%84%8B%E1%85%B4%20%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%83%E1%85%A9%E1%86%BC%20%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%85%E1%85%B5%2074cb01f3f887459b9f325b956549f829/%EC%8B%A4%ED%96%89.png)

```
T0 : MAR <- IR[Addr]
T1 : MBR <- M[MAR]
T2 : AC <- AC + MBR
```