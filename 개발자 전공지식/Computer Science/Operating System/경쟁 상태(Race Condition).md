# 경쟁 상태(Race Condition)

공유 자원에 대해 여러 프로세스가 동시에 접근할 때, 결과 값에 영향을 줄 수 있는 상태

> 두 개의 프로세스가 하나의 자원을 놓고 서로 사용하려고 경쟁하는 상황
> 

> 동시 접근 시 자료의 일관성을 해치는 결과가 나타남
> 

## Race Condition이 발생하는 경우

1. 커널 작업을 수행하는 중에 인터럽트 발생
    - 커널모드에서 데이터를 로드하여 작업을 하던 도중 인터럽트가 발생하여 같은 데이터를 조작하는 경우에 발생
    - 커널이 가진 전역변수는 모든 프로세스의 공유물이므르 경쟁상태의 가능성이 있다
    - 커널모드에서 작업을 수행하는 동안 인터럽트를 disable시켜 인터럽트가 CPU제어권을 가져가지 못하도록 하여 해결할 수 있다.
2. 프로세스가 ‘System call’을 하여 커널 모드로 진입하여 작업을 수행하는 도중 문맥 교환이 발생할 때
    - 프로세스1이 커널모드에서 데이터를 조작하던 도중 시간이 초과되어 CPU 제어권이 프로세스2로 넘어가 같은 데이터를 조작하는 경우
    - 프로세스가 커널모드에서 작업을 하는 경우 시간이 초과되어도 CPU 제어권이 다른 프로세스에게 넘어가지 않도록 함
3. 멀티 프로세서에서 공유 메모리 내의 커널 데이터에 접근할 경우
    - 멀티 프로세서 환경에서 2개의 CPU가 동시에 커널 내부에 공유 데이터에 접근하여 조작하는 경우
    - 커널 내부에 있는 각 공유 데이터에 접근할 때마다, 그 데이터에 대한 lock/unlock을 하는 함으로써 해결