# 프로세스 주소 공간

<br>

### 프로세스 주소 공간의 4가지 영역

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/189818721-0621edae-885f-41e0-b78f-0b81ed0e760e.png">
</p>

#### Text(Code)

- 사용자가 작성한 프로그램 함수들의 코드가 CPU에서 수행할 수 있는 `기계어 명령 형태로 변환되어 저장`되는 공간이다.
- **컴파일 타임에 결정**되고 중간에 코드를 바꿀 수 없게 **Read-Only**로 되어있다.

#### Data

- 전역 변수 또는 static변수 등 `프로그램이 사용하는 데이터를 저장하는 공간`이다.
- 전역 변수 또는 static 값을 참조한 코드는 컴파일이 완료되면 data 영역의 주소 값을 가리키도록 바뀐다.
- 전역 변수가 변경될 수 있어 **Read-Writer**로 되어있다.
- 초기화된 데이터는 Data 영역에 저장, 초기화 되지 않은 데이터는 BSS 영역에 저장된다.

##### Data 영역과 BSS 영역을 구분하는 이유는?

- 초기화 되지 않은 변수는 프로그램이 실행될 때 영역만 잡아주면 되고 그 값을 프로그램에 저장하고 있을 필요는 없으나
초기화가 되는 변수는 그 값도 프로그램에 저장하고 있어야 하기 때문이다.<br>
따라서, BSS 영역 변수들이 많아져도 프로그램의 실행코드 사이즈를 늘리지 않는다.

#### Stack

- 호출된 함수의 수행을 마치고 `복귀할 주소 및 데이터(지역변수, 매개변수, 리턴 값 등)를 임시로 저장`하는 공간이다.
- 스택이 가진 **LIFO**라는 특성을 따른다.
- **컴파일 시 Stack 영역의 크기가 결정**되기 때문에 무한정 할당할 수 없으며, **stack overflow**가 발생할 수 있다.

#### Heap

- `프로그래머가 필요할 때마다 사용하는 메모리 영역`으로 **런타임에 결정**된다. 자바에서는 객체가 Heap에 생성되고 **GC에 의해 정리**된다.

<br>

### 주소 공간을 나누는 이유

- 위와 같이 구역을 나눈 이유는 `데이터를 공유하여 메모리 사용량을 줄이기 위해서` 이다.

<br>

- **프로그램 함수와 지역변수**는 LIFO 특성을 가진 스택에서 실행된다.<br>
따라서, 함수들 안에서 공통으로 사용하는 전역함수를 따로 지정해주면 메모리를 아낄 수 있다.

<br><br><br>

---

<br><br><br>
