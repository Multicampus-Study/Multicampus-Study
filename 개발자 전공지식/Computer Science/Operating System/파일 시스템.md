# 파일 시스템

<br>

**파일 시스템**은 컴퓨터에서 파일이나 자료를 쉽게 발견할 수 있도록, 유지 및 관리하는 방법이다.<br>
저장매체에는 수많은 파일이 있기 때문에, 이런 파일들을 관리하는 방법을 말한다.

시스템 내의 모든 파일에 관한 정보를 제공하는 계층적 디렉토리 구조이며, 파일과 파일의 메타데이터, 디렉토리 정보 등을 관리한다.

<br>

### 파일 시스템의 목적

- 하드디스크와 메인 메모리 속도 차를 줄일 수 있다.
- 파일 관리
- 하드디스크 용량을 효율적으로 이용할 수 있다.

<br>

### 파일 시스템의 기능 및 역할

- 사용자가 파일을 생성, 삭제, 수정할 수 있게 한다.
- 여러 사용자가 파일을 공유할 수 있도록 한다.
- 주기억장치와 보조기억장치 간의 파일 전송을 담당한다.
- 파일에 대한 백업과 복구를 할 수 있다.
- 각 응용에 적합한 구조로 파일을 구성할 수 있도록 한다.
- 접근 방법을 제공한다.

<br>

### 파일 디스크럽터(File Descriptor)

- 파일을 관리하기 위한 **정보(metadata)** 를 보관하는 **파일제어블록(FCB, File Control Block)** 이다.
- 보조기억장치에 존재하다가 파일이 오픈되면 주기억장치로 이동한다.
- 파일시스템이 관리하며 사용자가 직접 참조할 수는 없다.
- 파일 디스크럽터는 파일마다 독립적으로 가지며 시스템마다 그 내용이 다르다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197515924-56d87817-229a-43fe-b7df-bcdbf54b519d.png">
</p>

<br>

### 디렉토리와 디스크 구조

#### 1단계 디렉토리

> 가장 간단한 구조이다.

모든 파일이 같은 디렉토리에서 관리되는 가장 간단한 구조<br>
파일들은 서로 유일한 이름을 가진다. 서로 다른 사용자라도 같은 이름 사용 불가하다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197518263-e88b85ac-823e-4df0-911d-3e9899050cad.png">
</p>

#### 2단계 디렉토리

> 사용자에게 개별적인 디렉토리를 만들어준다.

중앙에 **마스터파일 디렉토리(MFD)** 가 있고,<br>
그 아래에 **각 사용자에게 할당하는 디렉토리(UFD)** 가 있는 구조이다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197518309-2ee65a6d-2b6a-4e33-bb14-ed70c5c4b13d.png">
</p>

#### 트리 구조 디렉토리

> 2단계 구조에서 확장된 다단계 트리 구조이다.

하나의 **루트 디렉토리**와 다수의 **서브 디렉토리**로 구성된다.<br>
한 비트를 활용하여, 일반 파일(0)인지 디렉토리 파일(1)을 구분한다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197519595-abc18bc2-27f9-4e32-b65e-fdaef7f44899.png">
</p>

#### 비순환 그래프 디렉토리

> 디렉토리들이 서브 디렉토리들과 파일을 공유할 수 있도록 한다.

파일을 무작정 삭제하기 되면 현재 파일을 가리키는 포인터는 대상이 사라지게 된다. 따라서 파일에 참조 계수를 두어,<br>
참조 계수가 0이 되면 파일을 참조하는 링크가 존재하지 않는다는 의미이므로 그때 파일을 삭제할 수 있도록 한다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197519414-bdc64bdd-f920-4139-a0a1-2f7b4c10308f.png">
</p>

#### 일반 그래프 디렉토리

> 순환이 발생하지 않도록 하위 디렉토리가 아닌 파일에 대한 링크만 허용하거나, 가비지 컬렉션을 이용해 전체 파일 시스템을 순회하고 접근 가능한 모든 것을 표시

링크가 있으면 우회하며 순환을 피할 수 있다.

<p align="center">
<img src="https://user-images.githubusercontent.com/66001046/197519714-ae6c19bb-34c2-4921-bf8b-24180fe4a073.png">
</p>

<br><br><br>

---

<br><br><br>
